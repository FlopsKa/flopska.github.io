<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://flopska.com/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://flopska.com/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://flopska.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Florian Kalinke">
  <meta name="description" content="Posts and writings by Florian Kalinke">

  <link href="https://flopska.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="flopska.com Atom" />

<meta name="keywords" content="">

  <title>
    flopska.com
&ndash; Data Mining Cup 2018  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://flopska.com">
        <img src="/images/logo.jpg" alt="logo" class="round-img">
      </a>
      <h2><a href="https://flopska.com">flopska.com</a></h2>
      <p>Statistical machine learning.</br>Kernel methods.</br>Researcher at KIT.</br>Bouldering.</p>
      <ul>
        <li><a href="/articles.html">Articles</a></li>
        <li><a href="/legal-details.html">Imprint / Impressum</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="https://flopska.com">Index</a> &brvbar; <a href="https://flopska.com/archives.html">Archives</a>
      &brvbar; <a href="https://flopska.com/feeds/all.atom.xml">Atom</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://flopska.com/data-mining-cup-2018.html">Data Mining Cup 2018</a></h1>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 04 May 2019</p>
  </div>
  <div class="article_text">
    <p><link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"
      crossorigin="anonymous"></p>
<p>As part of a practical course from IPD we took part in this years' Data Mining Cup (DMC) sponsored by prodsys.</p>
<p>The DMC is a yearly competition where teams from universities around the world try to solve a data mining task. To quote the task from the <a href="https://www.data-mining-cup.com/reviews/dmc-2018/">official website</a>:</p>
<blockquote>
<p>The task for the participating teams is to use the sales data from a period of four months to develop a prediction model, which can be used to predict the products time of sell out in the following month. The aim is to predict as accurately as possible the precise day when items will sell out.</p>
</blockquote>
<p>Each competitor had to submit a file with the predicted sold out dates for February.</p>
<p>The course was split into four teams named after the four houses of Game of Thrones. My team consisted of 4 students and we competed against the other teams - the winner would be allowed to send their solution to the official jury. However, it was a very friendly competition -- with each team presenting their progress and sharing their ideas and findings every two weeks.</p>
<h2>Data</h2>
<p>Each team worked with the same data set which had the following form:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>head<span class="w"> </span>–n<span class="w"> </span><span class="m">1</span><span class="w"> </span>prices.csv
&gt;<span class="w"> </span>pid<span class="w"> </span><span class="p">|</span><span class="w"> </span>size<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">2017</span>-01-10<span class="w"> </span><span class="p">|</span><span class="w"> </span>…<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">2018</span>-02-28

$<span class="w"> </span>head<span class="w"> </span>–n<span class="w"> </span><span class="m">1</span><span class="w"> </span>train.csv
&gt;<span class="w"> </span>date<span class="w"> </span><span class="p">|</span><span class="w"> </span>pid<span class="w"> </span><span class="p">|</span><span class="w"> </span>size<span class="w"> </span><span class="p">|</span><span class="w"> </span>units

$<span class="w"> </span>head<span class="w"> </span>–n<span class="w"> </span><span class="m">1</span><span class="w"> </span>items.csv
&gt;<span class="w"> </span>pid<span class="w"> </span><span class="p">|</span><span class="w"> </span>size<span class="w"> </span><span class="p">|</span><span class="w"> </span>color<span class="w"> </span><span class="p">|</span><span class="w"> </span>brand<span class="w"> </span><span class="p">|</span><span class="w"> </span>rrp<span class="w"> </span><span class="p">|</span><span class="w"> </span>mainCategory<span class="w"> </span><span class="p">|</span><span class="w"> </span>category<span class="w"> </span><span class="p">|</span><span class="w"> </span>subCategory<span class="w"> </span><span class="p">|</span><span class="w"> </span>stock<span class="w"> </span><span class="p">|</span><span class="w"> </span>releaseDate
</code></pre></div>

<h2>Evaluation</h2>
<p>The goal of the competition was to minimize the error function</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><msqrt><mrow><munder><mo>∑</mo><mi>i</mi></munder><mi mathvariant="normal">∣</mi><msub><mi>d</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>d</mi><mo>^</mo></mover><mi>i</mi></msub><mi mathvariant="normal">∣</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">
\renewcommand{\R}{\mathbb R}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\mathrm{Var}}


E = \sqrt{\sum_i|d_i - \hat d_i|}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.04em;vertical-align:-1.52em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.52em;"><span class="svg-align" style="top:-5em;"><span class="pstrut" style="height:5em;"></span><span class="mord" style="padding-left:1em;"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">d</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span><span style="top:-3.48em;"><span class="pstrut" style="height:5em;"></span><span class="hide-tail" style="min-width:1.02em;height:3.08em;"><svg height="3.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 3240" width="400em" xmlns="http://www.w3.org/2000/svg"><path d="M473,2793 c339.3,-1799.3,509.3,-2700,510,-2702 l0 -0 c3.3,-7.3,9.3,-11,18,-11 H400000v40H1017.7 s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9 c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200 c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26 s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104, 606zM1001 80h400000v40H1017.7z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.52em;"><span></span></span></span></span></span></span></span></span></span></p>
<p>where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">
\renewcommand{\R}{\mathbb R}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\mathrm{Var}}

d_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is the actual sold-out date for item <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">
\renewcommand{\R}{\mathbb R}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\mathrm{Var}}

i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>d</mi><mo>^</mo></mover><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">
\renewcommand{\R}{\mathbb R}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\mathrm{Var}}

\hat d_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.1079em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">d</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is the predicted sold-out date for item <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">
\renewcommand{\R}{\mathbb R}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\mathrm{Var}}

i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>.</p>
<p><strong>Example</strong>: For an example item with a actual sold out date of 2018-02-24 and a predicted sold out date of 2018-02-20 the error is 2.</p>
<h2>Plan of attack</h2>
<p>Solving this exercise can't be too hard, right? So we as a team decided to stick to the common data analysis framework:</p>
<ol>
<li>Check the given data visually</li>
<li>Clean the data, clean outliers</li>
<li>Train a model</li>
<li>...</li>
<li>Profit</li>
</ol>
<p>However, it turned out that producing a good prediction was <em>very</em> hard.</p>
<h2>Models tested</h2>
<p>We did lots of experimenting with different approaches and models after we cleaned the data and inspected it visually:</p>
<ul>
<li>ARIMA / SARIMA models</li>
<li>Linear Regression</li>
<li>Lots and lots of trees</li>
<li>Neural nets</li>
</ul>
<p>However, nothing really worked.</p>
<h2>The winning approach (for KIT)</h2>
<p>What actually worked best for low-stock items is a prediction with this magic formula:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi>d</mi><mo>^</mo></mover><mi>i</mi></msub><mo>=</mo><mi>min</mi><mo>⁡</mo><mrow><mo stretchy="false">(</mo><mfrac><mrow><mi>s</mi><mi>t</mi><mi>o</mi><mi>c</mi><msub><mi>k</mi><mi>i</mi></msub></mrow><mn>0.08</mn></mfrac><mo separator="true">,</mo><mn>28</mn><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\renewcommand{\R}{\mathbb R}
\newcommand{\E}{\mathbb E}
\newcommand{\Var}{\mathrm{Var}}


\hat d_i = \min{(\frac{stock_i}{0.08}, 28)}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.1079em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9579em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">d</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.0833em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mop">min</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0.08</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">oc</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0315em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">28</span><span class="mclose">)</span></span></span></span></span></span></p>
<p>Based on this value we can infer the sold-out date by using it as an offset from the 1st of February.</p>
<p>With this prediction we were able to reach the 2nd place in our practical course. As the 1st place submitted in the wrong format they were disqualified and we got to submit our solution to the actual competition where we made 11th place - one place short of winning a trip to Berlin.</p>
<h2>Final remarks</h2>
<p>Taking part in the DMC was a very fun experience and everyone involved learned a lot. It made clear, once again, that solving real-world problems with machine learning is harder than one thinks.</p>
<p>Scoring 11th place with the formula given above also shows that a simple approach can trump over more sophisticated algorithms if the data and / or the problem at hand are an ill-fit for these algorithms.</p>
  </div>
  <div class="article_meta">
    <p>Category: <a href="https://flopska.com/category/data-science.html">data science</a>
    </p>
  </div>


</article>


    <div id="ending_message">
      <p>&copy; Florian Kalinke. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>